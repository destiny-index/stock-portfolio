{"version":3,"sources":["../../server/controllers/users.js"],"names":["req","res","user","User","getSingletonUser","shareHoldings","shareHoldingsValue","end","JSON","stringify","read"],"mappings":";;;;;;;;;;+BAKO,WAAqBA,GAArB,EAA0BC,GAA1B,EAA+B;AACpC,UAAMC,OAAOC,KAAKC,gBAAL,EAAb;AACA,UAAMC,gBAAgB,qCAAwBH,IAAxB,CAAtB;;AAEA,UAAMI,qBAAqB,MAAM,+CAA4BD,aAA5B,CAAjC;;AAEAJ,QAAIM,GAAJ,CAAQC,KAAKC,SAAL,cAAmBP,IAAnB,IAAyBI,kBAAzB,IAAR;AACD,G;;kBAPqBI,I;;;;;AAJtB;;IAAYP,I;;AACZ;;AACA","file":"users.js","sourcesContent":["// @flow\nimport * as User from '../models/users'\nimport {getCurrentShareHoldings} from '../../lib/users'\nimport {getLiveValueOfShareHoldings} from '../../lib/transactions'\n\nexport async function read (req, res) {\n  const user = User.getSingletonUser()\n  const shareHoldings = getCurrentShareHoldings(user)\n\n  const shareHoldingsValue = await getLiveValueOfShareHoldings(shareHoldings)\n\n  res.end(JSON.stringify({...user, shareHoldingsValue}))\n}\n"]}